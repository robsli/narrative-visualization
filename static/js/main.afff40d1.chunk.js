(this["webpackJsonpnarrative-visualization"]=this["webpackJsonpnarrative-visualization"]||[]).push([[0],{156:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(42),o=a.n(s),c=(a(156),a(4)),l=a.n(c),i=a(43),d=a(2),u=a(3),p=a(0),h=function(){return Object(p.jsxs)("header",{className:"w-full mx-auto mb-8 space-y-8",children:[Object(p.jsx)("h1",{className:"md:text-3xl lg:text-4xl py-8 text-xl text-center border-0 border-b border-gray-300 shadow",children:"2021 National Basketball Association Statistics"}),Object(p.jsxs)("section",{className:"max-w-screen-2xl px-8 mx-auto space-y-4",children:[Object(p.jsx)("h2",{className:"text-2xl text-center text-gray-500 uppercase",children:"About"}),Object(p.jsxs)("div",{className:"space-y-4 text-left",children:[Object(p.jsxs)("p",{className:"leading-7",children:["The visualization below provides a narrative of the 2021 NBA season in the form of two statistical measures commonly used for forecasting. The data used for this visualization is from FiveThirtyEight and is a subset of the data used to create their article"," ",Object(p.jsxs)("a",{className:"hover:underline text-blue-500",href:"https://projects.fivethirtyeight.com/complete-history-of-the-nba/#bucks",children:["The Complete History of the NBA ",Object(p.jsx)("span",{className:"text-xs",children:"(fivethirtyeight.com)"})]}),"."]}),Object(p.jsxs)("p",{className:"space-x-4 leading-8",children:[Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:"Data Source:"})," ",Object(p.jsx)("a",{href:"https://github.com/fivethirtyeight/data/tree/master/nba-forecasts",className:"hover:underline text-blue-500",children:"FiveThirtyEight"}),Object(p.jsxs)("span",{className:"text-xs",children:[" [",Object(p.jsx)("a",{href:"https://projects.fivethirtyeight.com/nba-model/nba_elo.csv",className:"hover:underline text-blue-500",children:"Download CSV"}),"]"]})]}),Object(p.jsx)("span",{children:"|"}),Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:"Elo:"})," ",Object(p.jsxs)("a",{className:"hover:underline text-blue-500",href:"https://en.wikipedia.org/wiki/Elo_rating_system",children:["Elo Rating System ",Object(p.jsx)("span",{className:"text-xs",children:"(wikipedia.com)"})]})]}),Object(p.jsx)("span",{children:"|"}),Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:"RAPTOR:"})," ",Object(p.jsxs)("a",{className:"hover:underline text-blue-500",href:"https://fivethirtyeight.com/features/how-our-raptor-metric-works/",children:["How Our RAPTOR Metric Works ",Object(p.jsx)("span",{className:"text-xs",children:"(fivethirtyeight.com)"})]})]})]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{className:"font-bold uppercase",children:"NOTE:"}),"The narrative mode is best viewed on full screen as the annotations will become squished together and harder to read on smaller screens. The chart is responsive with a minimum screen width of 872px."]})]})]})]})},m={ATL:"Atlanta Hawks",BRK:"Brooklyn Nets",BOS:"Boston Celtics",CHO:"Charlotte Hornets",CHI:"Chicago Bulls",CLE:"Cleveland Cavaliers",DAL:"Dallas Mavericks",DEN:"Denver Nuggets",DET:"Detroit Pistons",GSW:"Golden State Warriors",HOU:"Houston Rockets",IND:"Indiana Pacers",LAC:"Los Angeles Clippers",LAL:"Los Angeles Lakers",MEM:"Memphis Grizzlies",MIA:"Miami Heat",MIL:"Milwaukee Bucks",MIN:"Minnesota Timberwolves",NOP:"New Orleans Pelicans",NYK:"New York Knicks",OKC:"Oklahoma City Thunder",ORL:"Orlando Magic",PHI:"Philadelphia 76ers",PHO:"Phoenix Suns",POR:"Portland Trail Blazers",SAC:"Sacramento Kings",SAS:"San Antonio Spurs",TOR:"Toronto Raptors",UTA:"Utah Jazz",WAS:"Washington Wizards"},b=(Object.entries(m).map((function(e){var t=Object(d.a)(e,2);return{value:t[0],label:t[1]}})),[{value:"elo",label:"Elo"},{value:"raptor",label:"RAPTOR"}]),f=["January","February","March","April","May","June","July","August","September","October","November","December"],x=["2021-01","2021-02","2021-03","2021-04","2021-05","2021-06"],j=["p","q","s","c","f"],g={p:"Play-In",q:"Quarter Finals",s:"Semi Finals",c:"Conference Finals",f:"Finals"},O=function(e,t){switch(e){case"elo":return t.teamPostElo;case"raptor":return t.teamPreRaptor;default:return console.error("Unrecognized statistic category:",e),null}},y=function(e){var t=new Date(e),a=t.getFullYear(),r=f[t.getUTCMonth()];return"".concat(r," ").concat(a)},v=function(e){return e.reduce((function(e,t){var a=t.team1,r=t.team2,n=[];return e.includes(a)||n.push(a),e.includes(r)||n.push(r),e.concat(n)}),[]).sort()},w=a(44),N=a(13),S=function(e){var t=e.pathData,a=e.narrativeMode,n=e.selectedTeam,s=e.team,o=e.updateSelectedTeam,c=s===n,l=Object(r.useState)(!1),i=Object(d.a)(l,2),u=i[0],h=i[1],m=Object(r.useState)(),b=Object(d.a)(m,2),f=b[0],x=b[1],j=Object(r.useState)(),g=Object(d.a)(j,2),O=g[0],y=g[1];Object(r.useEffect)((function(){if(c||u){var e=t.split("L"),a=e[e.length-1].split(","),r=Object(d.a)(a,2),n=r[0],s=r[1];x(Number(n)+12),y(Number(s)+6)}}),[u,c,t]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("path",{fill:"none",className:"\n                    stroke-current transition-all ease-in-out\n                    ".concat(a?"cursor-not-allowed":"cursor-pointer","\n                    ").concat(c?"text-gray-600":u?"text-purple-500":"text-gray-300","\n                ").trim(),d:t,strokeWidth:c||u?6:2,onClick:function(){a||o(s)},onMouseOver:function(){return h(!0)},onMouseLeave:function(){return h(!1)}}),(c||u)&&f&&O&&Object(p.jsx)("text",{className:"\n                            text-base\n                            ".concat(c?"text-black":"text-purple-800","\n                        ").trim(),transform:"translate(".concat(f,", ").concat(O,")"),children:s})]})},M=function(e){var t=e.data,a=e.dataLineFunc,r=e.narrativeMode,n=e.selectedTeam,s=e.updateSelectedTeam;return Object(p.jsx)("g",{className:"w-full h-full",id:"data-lines-wrapper",children:t&&t.map((function(e){var t=e.team,o=e.games;return o&&o.length&&Object(p.jsx)(S,{pathData:a(o),narrativeMode:r,selectedTeam:n,team:t,updateSelectedTeam:s},"line-".concat(t))}))})},P=a(9),T=function(e){var t=e.chartHeight,a=e.chartWidth,n=e.gameData,s=e.stat,o=e.x,c=e.y,l=Object(r.useRef)(),i=o+200<a?50:-50,d=c<t/2?Math.min(100,t-c-40):Math.max(-100,40-c),h=n||{},m=h.team,b=h.teamScore,f=h.opponent,x=h.opponentScore,j=h.wins,g=h.losses,O=h.teamPreElo,y=h.teamPostElo,v=h.teamPreRaptor,w=(h.playoff,b>x),N=w?"".concat(m," improves to ").concat(j," - ").concat(g,"."):"".concat(m," slides to ").concat(j," - ").concat(g,"."),S=Number(y)-Number(O),M="elo"===s?"Elo ".concat(S>0?"improves by "+S.toFixed(2):"decreases by "+Math.abs(S).toFixed(2)," to ").concat(Number(y).toFixed(2),"."):"RAPTOR performance at ".concat(Number(v).toFixed(2),"."),T=[{x:o,y:c,dy:d,dx:i,note:{label:"".concat(N,"\n").concat(M),title:"".concat(w?"WIN against":"LOSS to"," ").concat(f," (").concat(b," - ").concat(x,")"),bgPadding:12,wrapSplitter:/\n/},color:w?"#047857":"#B91C1C"}],k=Object(P.a)().editMode(!0).type(P.b).annotations(T);return Object(r.useEffect)((function(){l&&l.current&&u.h(l.current).call(k)}),[k,l]),Object(p.jsx)("g",{id:"annotations-wrapper",className:"annotation-group",ref:l})},k=function(e){var t=e.chartHeight,a=e.chartWidth,n=e.gameData,s=e.narrativeMode,o=e.scaleX,c=e.scaleY,l=e.stat,i=o(new Date(n.date)),u=c(O(l,n)),h=Object(r.useState)(!1),m=Object(d.a)(h,2),b=m[0],f=m[1],x=n.teamScore>n.opponentScore;return Object(p.jsxs)("g",{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:[b&&!s&&Object(p.jsx)(T,{chartHeight:t,chartWidth:a,gameData:n,stat:l,x:i,y:u}),Object(p.jsx)("circle",{className:"".concat(x?"text-green-500":"text-red-500"," cursor-help fill-current animate-pulse"),cx:i,cy:u,r:7}),Object(p.jsx)("circle",{className:"cursor-help text-white fill-current",cx:i,cy:u,r:5}),Number(n.teamScore)>Number(n.opponentScore)&&Object(p.jsx)("circle",{className:"".concat(x?"text-green-500":"text-red-500"," animate-pulse cursor-help fill-current"),cx:i,cy:u,r:3})]})},R=function(e){var t=e.chartHeight,a=e.chartWidth,r=e.data,n=e.narrativeMode,s=e.scaleX,o=e.scaleY,c=e.stat;return Object(p.jsx)("g",{className:"w-full h-full",id:"data-points-wrapper",children:r&&r.map((function(e){return Object(p.jsx)(k,{chartHeight:t,chartWidth:a,gameData:e,narrativeMode:n,scaleX:s,scaleY:o,stat:c},"game-data-".concat(e.date,"-").concat(e.team))}))})},E=function(e){var t=e.gameData,a=e.scaleX,n=e.scaleY,s=e.stat,o=Object(r.useRef)(),c=t.map((function(e){var t=e.date,r=e.title,o=e.label,c=e.dx,l=e.dy;return{x:a(new Date(t)),y:n(O(s,e)),dx:c,dy:l,note:{label:o,title:r,bgPadding:{top:10,bottom:10,left:10,right:10}},color:"black"}})),l=Object(P.a)().editMode(!0).notePadding(15).type(P.b).annotations(c);return Object(r.useEffect)((function(){o&&o.current&&u.h(o.current).call(l)}),[l,o]),Object(p.jsx)("g",{id:"annotations-wrapper",className:"annotation-group",ref:o})},D=[{team:"LAL",date:"2021-01-01",title:"Lakers Continue Dominance",label:"The LA Lakers picked off right where they left off after winning the championship last season.",dx:50,dy:200},{team:"LAC",date:"2021-01-31",title:"Clippers Raising",label:"The LA Clippers begin to show some promise, securing the best record in the league at 16-5.",dx:-50,dy:50},{team:"PHI",date:"2021-02-03",title:"Sixers Atop the East",label:"After a 4 game winning streak, the Philadephia 76ers lead the Eastern Conference with a 16-6 record.",dx:100,dy:150},{team:"UTA",date:"2021-02-17",title:"Utah Jazz Shine",label:"The Utah Jazz go on a 20-1 run to become the undisputed best team in the NBA early on in the season.",dx:20,dy:50},{team:"DEN",date:"2021-04-01",title:"Denver Rises to 4th in West",label:"Behind a MVP-season performance from Nikola Jovic, the Denver Nuggets surge into 4th place in the West.",dx:-120,dy:50},{team:"OKC",date:"2021-04-13",title:"Thunder Continue Descent",label:"The Oklahoma City Thunder go on a 14-game losing streak. They would go on to only win 2 of their last 25 games.",dx:-40,dy:-40},{team:"POR",date:"2021-05-16",title:"Portland Bounces Back",label:"After a sliding to 32-18 in April, Portland wins 10 of its last 12 games to secure the 6th spot in the West and narrowly avoid the play-in.",dx:-20,dy:180},{team:"UTA",date:"2021-05-16",title:"End of Regular Season",label:"The Utah Jazz finish the regular season with the best record in the NBA (52 - 20) and the first seed in the Western Conference.",dx:-150,dy:30}],A=[{team:"MEM",date:"2021-05-21",playoffRound:"p",title:"Memphis Grizzlies Make Playoffs",label:"In the first play-in tournament ever, the Memphis Grizzlies upset 8th seed Golden State Warriors and advance to the playoffs.",dx:50,dy:100},{team:"BRK",date:"2021-06-01",playoffRound:"q",title:"Brooklyn Nets Dominant",label:"The Brooklyn Nets defeat Boston 4-1, emerging as the favorites in the East.",dx:25,dy:100},{team:"LAC",date:"2021-06-18",playoffRound:"s",title:"Clippers Upset Jazz",label:"The West's 1 seed Utah Jazz lose 4 straight to the LA Clippers and exit early from the playoffs.",dx:-120,dy:30},{team:"MIL",date:"2021-06-19",playoffRound:"s",title:"Bucks Best Nets",label:"The Milwaukee Bucks overcome an injured Brooklyn Nets in 7 games.",dx:-100,dy:250},{team:"ATL",date:"2021-06-20",playoffRound:"s",title:"Atlanta Upsets 76ers",label:"The young Atlanta Hawks pull off a game 7 win against 1st seed Philadelphia 76ers.",dx:40,dy:280},{team:"PHO",date:"2021-06-30",playoffRound:"c",title:"Phoenix Cruises to Finals",label:"The Phoenix Suns take advantage of a key injury on the Clippers and deliver a convincing win to advance from the West.",dx:-20,dy:150},{team:"MIL",date:"2021-07-03",playoffRound:"c",title:"Bucks Advance to Finals",label:"The Milwaukee Bucks take care of business and beat the Hawks in 6 games.",dx:80,dy:100},{team:"PHO",date:"2021-07-08",playoffRound:"f",title:"Phoenix Starts Strong",label:"The Phoenix Suns go up 2-0, taking a commanding lead in the NBA Finals.",dx:140,dy:200},{team:"MIL",date:"2021-07-20",playoffRound:"f",title:"Milwaukee Wins Championship",label:"The Milwaukee Bucks cap off a 4-0 run to win the 2021 NBA Championship over the Suns.",dx:80,dy:60}],C=800,_=800,L=64,B=function(e){var t=e.seasonDataByTeam,a=e.regularSeasonGames,n=e.playoffGames,s=e.playoffRound,o=e.maxDate,c=e.narrativeMode,l=e.rawData,i=e.selectedTeam,h=e.showOnlyPlayoffs,m=e.stat,b=e.updateSelectedTeam,f=C,x=_,g=L,y=Object(r.useRef)(),v=Object(r.useState)({}),S=Object(d.a)(v,2),P=S[0],T=S[1],k=Object(r.useState)(),B=Object(d.a)(k,2),z=B[0],H=B[1],F=Object(r.useState)(),G=Object(d.a)(F,2),W=G[0],I=G[1],U=Object(r.useState)(),J=Object(d.a)(U,2),Y=J[0],K=J[1],X=Object(r.useState)(),q=Object(d.a)(X,2),V=q[0],Q=q[1],Z=Object(r.useState)((function(){return function(){}})),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ae=Object(r.useState)((function(){return function(){}})),re=Object(d.a)(ae,2),ne=re[0],se=re[1],oe=Object(r.useState)((function(){return function(){}})),ce=Object(d.a)(oe,2),le=ce[0],ie=ce[1],de=Object(r.useState)([]),ue=Object(d.a)(de,2),pe=ue[0],he=ue[1];return Object(r.useEffect)((function(){var e=function(){if(y&&y.current){var e=Math.max(x,y.current.parentElement.clientWidth-g),t=Math.min(window.innerHeight,f,1.2*e);H(e),I(t)}};return z||W||e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[y,g,z,W,x,f]),Object(r.useEffect)((function(){var e=function(e){return e.reduce((function(e,t){var a=t.elo1_pre,r=t.elo2_pre,n=t.elo1_post,s=t.elo2_post,o=t.raptor1_pre,c=t.raptor2_pre;return{eloMin:Math.min(e.eloMin,a,r,n,s),eloMax:Math.max(e.eloMax,a,r,n,s),raptorMin:Math.min(e.raptorMin,o,c),raptorMax:Math.max(e.raptorMax,o,c)}}),{eloMin:99999,eloMax:0,raptorMin:99999,raptorMax:0})}(l);T(e)}),[l]),Object(r.useEffect)((function(){var e=u.h(y.current).select("#chart-wrapper").attr("transform","translate(".concat(g,", ").concat(g/2,")")),t=h?n:a;if(t){var r=u.d(t,(function(e){return new Date(e.date)})),s=r[1].setDate(r[1].getDate()+10),o=u.g().domain([r[0],s]).range([0,z-g]),c=u.a(o).ticks(u.i,"'%y %b %d").tickSize(-W+g);e.select("#x-axis").select("*").remove();var l=e.select("#x-axis").attr("transform","translate(0, ".concat(W-2*g,")")).call(c);l.select(".domain").attr("class",""),l.selectAll("line").attr("class","text-gray-200"),l.selectAll("text").attr("class","text-base text-gray-500 transform -rotate-90 text-right").attr("y",-6).attr("x",10-g);var i=u.f().domain(function(e,t){var a=function(e){return.99*Number(e)},r=function(e){return 1.02*Number(e)};switch(e){case"elo":return[a(t.eloMin),r(t.eloMax)];case"raptor":return[a(t.raptorMin),r(t.raptorMax)];case"score":return[a(t.scoreMin),r(t.scoreMax)];default:return console.error("No bounds found for stat:",e),[0,0]}}(m,P)).range([W-2*g,0]),d=u.b(i).ticks(5).tickPadding(20).tickSize(-z+g);e.select("#y-axis").select("*").remove();var p=e.select("#y-axis").call(d);p.select(".domain").remove(),p.selectAll("line").attr("class","text-gray-200"),p.selectAll("text").attr("class","text-base text-gray-800");var b=u.e().x((function(e){return o(new Date(e.date))})).y((function(e){return i(O(m,e))}));te((function(){return o})),se((function(){return i})),ie((function(){return b}))}}),[P,W,z,g,m,h,n,a]),Object(r.useEffect)((function(){if(c&&t){var e=Object.values(t).reduce((function(e,t){if(!t.length)return e;var a=t[t.length-1];return Number(a.teamPostElo)>Number(e.teamPostElo)?a:e}),{teamPostElo:0});if(e&&e.team&&b(e.team),h){var r=A.filter((function(e){return j.indexOf(e.playoffRound)<=j.indexOf(s)})).map((function(e){var t=n.find((function(t){return t.date===e.date&&(t.team1===e.team||t.team2===e.team)})),a=t.team1===e.team;return Object(N.a)(Object(N.a)({},e),{},{teamPostElo:a?t.elo1_post:t.elo2_post,teamPreRaptor:a?t.raptor1_pre:t.raptor2_pre,teamScore:a?t.score1:t.score2,opponentScore:a?t.score2:t.score1})}));Q(r)}else{var l=D.filter((function(e){return new Date(e.date)<=new Date(o)})).map((function(e){var t=a.find((function(t){return t.date===e.date&&(t.team1===e.team||t.team2===e.team)})),r=t.team1===e.team;return Object(N.a)(Object(N.a)({},e),{},{teamPostElo:r?t.elo1_post:t.elo2_post,teamPreRaptor:r?t.raptor1_pre:t.raptor2_pre,teamScore:r?t.score1:t.score2,opponentScore:r?t.score2:t.score1})}));Q(l)}}}),[l,c,t,b,o,h,s,n,a]),Object(r.useEffect)((function(){if(t){var e=Object.entries(t).reduce((function(e,t){var a=e.selectedTeamData,r=e.orderedData,n=Object(d.a)(t,2),s=n[0],o=n[1];return s===i?{selectedTeamData:{team:s,games:o},orderedData:r}:{selectedTeamData:a,orderedData:r.concat({team:s,games:o})}}),{selectedTeamData:null,orderedData:[]}),a=e.orderedData,r=e.selectedTeamData;he(r),K([].concat(Object(w.a)(a),[r]).filter((function(e){return e})))}}),[t,i,c]),Object(p.jsx)("svg",{className:"w-full h-full max-h-screen transition-all ease-in-out",ref:y,width:z,height:W&&W+g,children:z&&W&&Object(p.jsxs)("g",{id:"chart-wrapper",children:[Object(p.jsx)("g",{id:"x-axis",className:""}),Object(p.jsx)("g",{id:"y-axis",className:""}),Y&&Object(p.jsxs)("g",{className:"w-full h-full",children:[Object(p.jsx)(M,{data:Y,dataLineFunc:le,narrativeMode:c,selectedTeam:i,updateSelectedTeam:b}),pe&&Object(p.jsx)(R,{chartHeight:W,chartWidth:z,data:c?V:pe.games,narrativeMode:c,scaleX:ee,scaleY:ne,stat:m}),c&&V&&Object(p.jsx)(E,{gameData:V,scaleX:ee,scaleY:ne,stat:m})]})]})})},z=function(e){var t=e.maxDate,a=e.narrativeMode,r=e.playoffRound,n=e.selectedStat,s=e.selectedTeam,o=e.showOnlyPlayoffs,c=e.teamOptions,l=e.updateMaxDate,i=e.updateNarrativeMode,d=e.updatePlayoffRound,u=e.updateSelectedStat,h=e.updateSelectedTeam,f=e.updateShowOnlyPlayoffs;return Object(p.jsxs)("section",{className:"lg:flex-row border-b-300 lg:space-y-0 flex flex-col w-full pb-4 space-y-4 border-0 border-b",children:[Object(p.jsxs)("div",{className:"lg:border-r lg:border-b-0 lg:pb-0 flex flex-col pb-4 pr-4 space-y-4 border-0 border-b border-gray-200",children:[Object(p.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(p.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Visualization Mode"}),Object(p.jsxs)("button",{className:"nowrap w-max-content flex overflow-hidden leading-tight text-gray-800 border rounded-full shadow-sm",onClick:function(){return i(!a)},children:[Object(p.jsx)("span",{className:"block px-3 py-2 w-32 ".concat(a?"text-white bg-green-600 shadow":"bg-gray-100 text-gray-400 shadow-inner"),children:"Narrative"}),Object(p.jsx)("span",{className:"block px-3 py-2 w-32 ".concat(a?"bg-gray-100 text-gray-400 shadow-inner":"text-white bg-green-600 shadow"),children:"Exploration"})]})]}),Object(p.jsxs)("dl",{className:"flex flex-col space-y-4",children:[Object(p.jsxs)("div",{className:"space-y-2",children:[Object(p.jsx)("dt",{className:"font-semibold",children:"Narrative Mode"}),Object(p.jsx)("dd",{className:"",children:"Narrative Mode walks you through the story of the 2021 NBA regular season or playoffs."})]}),Object(p.jsxs)("div",{className:"space-y-2",children:[Object(p.jsx)("dt",{className:"font-semibold",children:"Exploration Mode"}),Object(p.jsx)("dd",{className:"",children:"Exploration Mode allows you to explore the 2021 NBA season using Elo or Raptor statistics for any given team."})]})]}),Object(p.jsxs)("div",{className:"flex-nowrap flex items-center space-x-10",children:[Object(p.jsx)("div",{className:"w-20 h-0.5 bg-gray-300 hover:bg-purple-500 hover:h-1.5 ".concat(a?"cursor-not-allowed":"cursor-pointer")}),Object(p.jsx)("span",{children:a?"Hover over a line to see which team it is":"Hover over a line to see which team it is, click on line to select team"})]}),!a&&Object(p.jsxs)("div",{className:"flex-nowrap flex items-center space-x-10",children:[Object(p.jsxs)("div",{className:"flex justify-around w-20",children:[Object(p.jsx)("div",{className:"flex items-center justify-center w-3.5 h-3.5 border-2 border-green-500 rounded-full animate-pulse cursor-help",children:Object(p.jsx)("div",{className:"animate-pulse w-1.5 h-1.5 bg-green-500 rounded-full"})}),Object(p.jsx)("div",{className:"flex items-center justify-center w-3.5 h-3.5 border-2 border-red-500 rounded-full cursor-help"})]}),Object(p.jsx)("span",{children:"Hover over data points to see more information about the game"})]})]}),Object(p.jsxs)("div",{className:"w-96 md:text-sm lg:text-base flex flex-col flex-grow px-4 space-y-4 text-xs",children:[Object(p.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(p.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Show Games From"}),Object(p.jsxs)("button",{className:"nowrap w-max-content flex overflow-hidden leading-tight text-gray-800 border rounded-full shadow-sm",onClick:function(){return f(!o)},children:[Object(p.jsx)("span",{className:"block px-3 py-2 lg:w-40 ".concat(o?"bg-gray-100 text-gray-400 shadow-inner":"text-white bg-green-600 shadow"),children:"Regular Season"}),Object(p.jsx)("span",{className:"block px-3 py-2 lg:w-40 ".concat(o?"text-white bg-green-600 shadow":"bg-gray-100 text-gray-400 shadow-inner"),children:"Playoffs"})]})]}),Object(p.jsxs)("label",{className:"lg:max-w-xs flex flex-col space-y-2",children:[Object(p.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Statistic"}),Object(p.jsx)("select",{id:"statistic-select",className:"disabled:cursor-not-allowed px-3 py-2 leading-tight text-gray-800 border rounded shadow cursor-pointer",onChange:function(e){var t=e.target;return u(t.value)},value:n,children:b.map((function(e){return Object(p.jsx)("option",{value:e.value,children:e.label},e.value)}))})]}),!a&&Object(p.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(p.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Team"}),Object(p.jsxs)("select",{id:"team-select",className:"disabled:cursor-not-allowed px-3 py-2 leading-tight text-gray-800 border rounded shadow cursor-pointer",onChange:function(e){var t=e.target;return h(t.value)},value:s,disabled:a,children:[Object(p.jsx)("option",{value:"",children:"All"}),c.map((function(e){return Object(p.jsx)("option",{value:e,children:m[e]},e)}))]})]}),!o&&Object(p.jsxs)("div",{className:"lg:flex-nowrap lg:space-x-2 lg:space-y-0 lg:justify-start flex flex-wrap items-end justify-between space-y-2",children:[Object(p.jsx)("button",{className:"lg:order-1 disabled:cursor-not-allowed whitespace-nowrap disabled:text-gray-200 w-min hover:bg-green-500 disabled:bg-gray-300 order-2 px-3 py-2 leading-tight text-white transition-colors duration-100 bg-green-600 border rounded shadow",disabled:x.indexOf(t)<=0,onClick:function(){var e=x.indexOf(t)-1;l(x[e])},children:"< Prev"}),Object(p.jsxs)("label",{className:"lg:order-2 lg:w-auto flex flex-col order-1 w-full space-y-2",children:[Object(p.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Games Up To"}),Object(p.jsxs)("select",{id:"month-select",className:"px-3 py-2 leading-tight text-gray-800 border rounded shadow cursor-pointer",onChange:function(e){var t=e.target;return l(t.value)},value:t,children:[Object(p.jsx)("option",{value:x[x.length-1],children:"Regular Season"},"all-option"),x.map((function(e){return Object(p.jsx)("option",{value:e,children:y(e)},e)}))]})]}),Object(p.jsx)("button",{className:"disabled:cursor-not-allowed whitespace-nowrap disabled:text-gray-200 w-min hover:bg-green-500 disabled:bg-gray-300 order-3 px-3 py-2 leading-tight text-white transition-colors duration-100 bg-green-600 border rounded shadow",disabled:!t,onClick:function(){if(x.indexOf(t)>=x.length-1)d("p"),f(!0);else{var e=x.indexOf(t)+1;l(x[e])}},children:x.indexOf(t)>=x.length-1?"Playoffs >":"Next >"})]}),o&&Object(p.jsxs)("div",{className:"flex-nowrap flex items-end space-x-2",children:[Object(p.jsx)("button",{className:"disabled:cursor-not-allowed disabled:text-gray-200 w-max-content hover:bg-green-500 disabled:bg-gray-300 px-3 py-2 leading-tight text-white transition-colors duration-100 bg-green-600 border rounded shadow",onClick:function(){0===j.indexOf(r)?(l(x[x.length-1]),f(!1)):d(j[j.indexOf(r)-1])},children:0===j.indexOf(r)?"< Season":"< Prev"}),Object(p.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(p.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Playoff Round"}),Object(p.jsx)("select",{id:"playoff-round-select",className:"w-48 px-3 py-2 leading-tight text-gray-800 border rounded shadow",onChange:function(e){var t=e.target;return d(t.value)},value:r,children:j.map((function(e){return Object(p.jsx)("option",{value:e,children:g[e]},e)}))})]}),Object(p.jsx)("button",{className:"disabled:cursor-not-allowed disabled:text-gray-200 w-max-content hover:bg-green-500 disabled:bg-gray-300 px-3 py-2 leading-tight text-white transition-colors duration-100 bg-green-600 border rounded shadow",disabled:j.indexOf(r)>=j.length-1,onClick:function(){d(j[j.indexOf(r)+1])},children:"Next >"})]})]})]})},H=function(e){var t=e.narrativeMode,a=e.stat;return Object(p.jsxs)("div",{className:"flex w-full py-3 space-x-8",children:[Object(p.jsxs)("div",{className:"capitalize",children:["Statistic: ","elo"===a?"Elo":"RAPTOR"]}),Object(p.jsxs)("div",{className:"flex-nowrap flex space-x-6",children:[Object(p.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(p.jsx)("div",{className:"flex items-center justify-center w-3.5 h-3.5 border-2 border-green-500 rounded-full animate-pulse",children:Object(p.jsx)("div",{className:"animate-pulse w-1.5 h-1.5 bg-green-500 rounded-full"})}),Object(p.jsx)("span",{children:"Win"})]}),Object(p.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(p.jsx)("div",{className:"flex items-center justify-center w-3.5 h-3.5 border-2 border-red-500 rounded-full"}),Object(p.jsx)("span",{children:"Loss"})]}),Object(p.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(p.jsx)("div",{className:"w-10 h-1.5 bg-gray-700"}),Object(p.jsx)("span",{children:t?"Team with highest ".concat("elo"===a?"Elo":"RAPTOR score"," as of selected timeframe"):"Selected team"})]}),Object(p.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(p.jsx)("div",{className:"w-10 h-0.5 bg-gray-300"}),Object(p.jsx)("span",{children:"Other teams"})]})]})]})},F=function(e){var t=e.data,a=Object(r.useState)(!0),n=Object(d.a)(a,2),s=n[0],o=n[1],c=Object(r.useState)("elo"),l=Object(d.a)(c,2),i=l[0],u=l[1],h=Object(r.useState)("MIL"),b=Object(d.a)(h,2),f=b[0],x=b[1],g=Object(r.useState)("2021-01"),O=Object(d.a)(g,2),y=O[0],w=O[1],N=Object(r.useState)(!1),S=Object(d.a)(N,2),M=S[0],P=S[1],T=Object(r.useState)(),k=Object(d.a)(T,2),R=k[0],E=k[1],D=Object(r.useState)(),A=Object(d.a)(D,2),C=A[0],_=A[1],L=Object(r.useState)(),F=Object(d.a)(L,2),G=F[0],W=F[1],I=Object(r.useState)(),U=Object(d.a)(I,2),J=U[0],Y=U[1],K=Object(r.useState)([]),X=Object(d.a)(K,2),q=X[0],V=X[1],Q=Object(r.useState)([]),Z=Object(d.a)(Q,2),$=Z[0],ee=Z[1];Object(r.useEffect)((function(){var e=Object.keys(m).reduce((function(e,a){var r=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"2021";return e.reduce((function(e,o){if(o.season!==s)return e;if(!r&&o.playoff)return e;if(r&&(!o.playoff||j.indexOf(o.playoff)>j.indexOf(n)))return e;if(!r&&a&&a&&new Date(a)<new Date(o.date))return e;var c=e.length>0?e[e.length-1]:{wins:0,losses:0};if(o.team1===t){var l=Number(o.score1),i=Number(o.score2),d={date:o.date,playoff:o.playoff,team:o.team1,teamScore:l,teamPreElo:o.elo1_pre,teamPostElo:o.elo1_post,teamPreRaptor:o.raptor1_pre,teamRaptorProb:o.raptor_prob1,opponent:o.team2,opponentScore:i,opponentPreElo:o.elo2_pre,opponentPostElo:o.elo2_post,opponentPreRaptor:o.raptor2_pre,opponentRaptorProb:o.raptor_prob2,wins:l>i?c.wins+1:c.wins,losses:l<i?c.losses+1:c.losses};return e.concat(d)}if(o.team2===t){var u=Number(o.score2),p=Number(o.score1),h={date:o.date,playoff:o.playoff,team:o.team2,teamScore:u,teamPreElo:o.elo2_pre,teamPostElo:o.elo2_post,teamPreRaptor:o.raptor2_pre,teamRaptorProb:o.raptor_prob2,opponent:o.team1,opponentScore:p,opponentPreElo:o.elo1_pre,opponentPostElo:o.elo1_post,opponentPreRaptor:o.raptor1_pre,opponentRaptorProb:o.raptor_prob1,wins:u>p?c.wins+1:c.wins,losses:u<p?c.losses+1:c.losses};return e.concat(h)}return e}),[])}(t,a,y,M,R);return e[a]=r,e}),{});_(e)}),[t,y,M,R]),Object(r.useEffect)((function(){var e=t.reduce((function(e,t){return t.playoff?{rGames:e.rGames,pGames:e.pGames.concat(t)}:{rGames:e.rGames.concat(t),pGames:e.pGames}}),{rGames:[],pGames:[]}),a=e.rGames,r=e.pGames;W(a),Y(r)}),[t]),Object(r.useEffect)((function(){if(G){var e=v(G);V(e)}if(J){var t=v(J);ee(t)}}),[G,J]);return Object(p.jsxs)("div",{className:"max-w-screen-2xl flex flex-col items-center w-full p-8 mx-auto space-y-4 border rounded shadow",children:[Object(p.jsx)(z,{maxDate:y,narrativeMode:s,playoffRound:R,selectedStat:i,selectedTeam:f,showOnlyPlayoffs:M,teamOptions:M?$:q,updateMaxDate:w,updateNarrativeMode:function(e){e&&(u("elo"),x(""),P(!1),E(null)),o(e)},updatePlayoffRound:E,updateSelectedStat:u,updateSelectedTeam:x,updateShowOnlyPlayoffs:function(e){P(e),E(e?"p":null)}}),Object(p.jsx)(H,{narrativeMode:s,stat:i}),Object(p.jsx)(B,{rawData:t,seasonDataByTeam:C,regularSeasonGames:G,playoffGames:J,showOnlyPlayoffs:M,playoffRound:R,maxDate:y,narrativeMode:s,stat:i,selectedTeam:f,updateSelectedTeam:function(e){return x(e)}})]})};var G=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(),o=Object(d.a)(s,2),c=o[0],m=o[1],b=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)(t);case 2:a=e.sent,n(a),m(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){try{b("https://projects.fivethirtyeight.com/nba-model/nba_elo_latest.csv")}catch(e){console.error(e),m(e),b("https://robsli.github.io/narrative-visualization/data/nba_elo_latest.csv")}}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h,{}),Object(p.jsx)("main",{className:"md:px-4 lg:px-8 w-full px-2 pb-8 mx-auto",children:Object(p.jsxs)("section",{className:"",children:[c&&Object(p.jsx)("div",{children:"There was an error loading the data from fivethirtyeight.com. Attempting to use local copy..."}),!c&&a.length&&Object(p.jsx)(F,{data:a})]})})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,161)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),s(e),o(e)}))};o.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(G,{})}),document.getElementById("root")),W()}},[[159,1,2]]]);
//# sourceMappingURL=main.afff40d1.chunk.js.map