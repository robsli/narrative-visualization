(this["webpackJsonpnarrative-visualization"]=this["webpackJsonpnarrative-visualization"]||[]).push([[0],{110:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a.n(r),n=a(30),c=a.n(n),s=(a(110),a(3)),l=a.n(s),i=a(31),p=a(2),u=a(4),d=a(0),b=function(e){return Object(d.jsx)("header",{className:"w-full px-3 py-2",children:"Header"})},f=function(e){return Object(d.jsx)("nav",{})},j={ATL:"Atlanta Hawks",BRK:"Brooklyn Nets",BOS:"Boston Celtics",CHO:"Charlotte Hornets",CHI:"Chicago Bulls",CLE:"Cleveland Cavaliers",DAL:"Dallas Mavericks",DEN:"Denver Nuggets",DET:"Detroit Pistons",GSW:"Golden State Warriors",HOU:"Houston Rockets",IND:"Indiana Pacers",LAC:"Los Angeles Clippers",LAL:"Los Angeles Lakers",MEM:"Memphis Grizzlies",MIA:"Miami Heat",MIL:"Milwaukee Bucks",MIN:"Minnesota Timberwolves",NOP:"New Orleans Pelicans",NYK:"New York Knicks",OKC:"Oklahoma City Thunder",ORL:"Orlando Magic",PHI:"Philadelphia 76ers",PHO:"Phoenix Suns",POR:"Portland Trail Blazers",SAC:"Sacramento Kings",SAS:"San Antonio Spurs",TOR:"Toronto Raptors",UTA:"Utah Jazz",WAS:"Washington Wizards"},m=Object.entries(j).map((function(e){var t=Object(p.a)(e,2);return{value:t[0],label:t[1]}})),x=[{value:"elo",label:"ELO"},{value:"raptor",label:"Raptor"},{value:"score",label:"Score"}],h=function(e){var t=e.selectedStat,a=e.selectedTeam,r=e.updateSelectedStat,o=e.updateSelectedTeam;return Object(d.jsxs)("div",{className:"flex-nowrap flex space-x-4",children:[Object(d.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(d.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Team"}),Object(d.jsxs)("select",{id:"team-select",className:"px-3 py-2 leading-tight text-gray-800 border rounded shadow",onChange:function(e){var t=e.target;return o(t.value)},value:a,children:[Object(d.jsx)("option",{value:"all",children:"All"}),m.map((function(e){return Object(d.jsx)("option",{value:e.value,children:e.label},e.value)}))]})]}),Object(d.jsxs)("label",{className:"flex flex-col space-y-2",children:[Object(d.jsx)("span",{className:"text-sm font-medium text-gray-500 uppercase",children:"Statistic"}),Object(d.jsx)("select",{id:"statistic-select",className:"px-3 py-2 leading-tight text-gray-800 border rounded shadow",onChange:function(e){var t=e.target;return r(t.value)},value:t,children:x.map((function(e){return Object(d.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})]})},O=800,v=800,M=64,g=function(e){var t=e.data,a=e.rawData,o=e.stat,n=Object(r.useRef)(),c=Object(r.useState)({}),s=Object(p.a)(c,2),l=s[0],i=s[1];return Object(r.useEffect)((function(){var e=function(e){return e.reduce((function(e,t){var a=t.elo1_pre,r=t.elo2_pre,o=t.elo1_post,n=t.elo2_post,c=t.raptor1_pre,s=t.raptor2_pre,l=t.score1,i=t.score2;return{eloMin:Math.min(e.eloMin,a,r,o,n),eloMax:Math.max(e.eloMax,a,r,o,n),raptorMin:Math.min(e.raptorMin,c,s),raptorMax:Math.max(e.raptorMax,c,s),scoreMin:Math.min(e.scoreMin,l,i),scoreMax:Math.max(e.scoreMax,l,i)}}),{eloMin:99999,eloMax:0,raptorMin:99999,raptorMax:0,scoreMin:99999,scoreMax:0})}(a);console.log("bounds:",e),i(e)}),[a,o]),Object(r.useEffect)((function(){var e=v,t=O,r=M,c=u.f().domain(u.d(a,(function(e){return new Date(e.date)}))).range([0,t]),s=u.e().domain(function(e,t){switch(e){case"elo":return[t.eloMin,t.eloMax];case"raptor":return[t.raptorMin,t.raptorMax];case"score":return[t.scoreMin,t.scoreMax];default:return console.error("No bounds found for stat:",e),[0,0]}}(o,l)).range([e,0]);console.log("xScale:",c),console.log("yScale:",s);var i=u.g(n.current);i.selectAll("*").remove();var p=i.append("g").attr("transform","translate(".concat(r,", ").concat(r,")")),d=u.a(c).ticks(5).tickSize(-e+r),b=(p.append("g").attr("transform","translate(0, ".concat(e-r,")")).call(d),u.b(s).ticks(5).tickSize(-t));p.append("g").call(b)}),[l,t,a]),Object(d.jsxs)("div",{className:"w-full max-w-6xl p-6 border rounded shadow",children:["Chart",Object(d.jsx)("svg",{className:"",ref:n,width:O+2*M,height:v+2*M})]})},S=function(e){var t=e.data,a=Object(r.useState)("elo"),o=Object(p.a)(a,2),n=o[0],c=o[1],s=Object(r.useState)("MIL"),l=Object(p.a)(s,2),i=l[0],u=l[1],b=Object(r.useState)(),f=Object(p.a)(b,2),m=f[0],x=f[1];return Object(r.useEffect)((function(){var e=Object.keys(j).reduce((function(e,a){var r=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2021";return e.reduce((function(e,r){if(r.season!==a)return e;if(r.team1===t){var o={date:r.date,playoff:r.playoff,teamScore:r.score1,teamPreElo:r.elo1_pre,teamPostElo:r.elo1_post,teamPreRaptor:r.raptor1_pre,teamRaptorProb:r.raptor_prob1,opponent:r.team2,opponentScore:r.score2,opponentPreElo:r.elo2_pre,opponentPostElo:r.elo2_post,opponentPreRaptor:r.raptor2_pre,opponentRaptorProb:r.raptor_prob2};return e.concat(o)}if(r.team2===t){var n={date:r.date,playoff:r.playoff,teamScore:r.score2,teamPreElo:r.elo2_pre,teamPostElo:r.elo2_post,teamPreRaptor:r.raptor2_pre,teamRaptorProb:r.raptor_prob2,opponent:r.team1,opponentScore:r.score1,opponentPreElo:r.elo1_pre,opponentPostElo:r.elo1_post,opponentPreRaptor:r.raptor1_pre,opponentRaptorProb:r.raptor_prob1};return e.concat(n)}return e}),[])}(t,a);return e[a]=r,e}),{});x(e)}),[t]),Object(d.jsxs)("div",{className:"flex flex-col items-center w-full px-8 space-y-8",children:[Object(d.jsx)(h,{selectedStat:n,selectedTeam:i,updateSelectedStat:c,updateSelectedTeam:u}),Object(d.jsx)(g,{data:m,rawData:t,stat:n})]})};var P=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],o=t[1],n=Object(r.useState)(),c=Object(p.a)(n,2),s=c[0],j=c[1],m=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)(t);case 2:a=e.sent,console.log("latestEloData:",a),o(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){try{m("https://projects.fivethirtyeight.com/nba-model/nba_elo_latest.csv")}catch(e){console.error(e),j(e)}}),[]),Object(d.jsxs)("main",{className:"w-full",children:[Object(d.jsx)(b,{}),Object(d.jsx)(f,{}),Object(d.jsxs)("section",{className:"",children:[s&&Object(d.jsx)("div",{children:"There was an error loading the data"}),!s&&a.length&&Object(d.jsx)(S,{data:a})]})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,114)).then((function(t){var a=t.getCLS,r=t.getFID,o=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),o(e),n(e),c(e)}))};c.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(P,{})}),document.getElementById("root")),w()}},[[113,1,2]]]);
//# sourceMappingURL=main.7e6cf04d.chunk.js.map